@using CampeonatosNParty.Models.Database
@model CampeonatosNParty.Models.ViewModel.HomeView
@{
    ViewBag.Title = "Index";
}

<div class="hero-unit">
    <h1>Campeonatos N-Party</h1>
    <p>This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.</p>
    <p><a href="#" class="btn btn-primary btn-large">Learn more &raquo;</a></p>
</div>

<!-- Example row of columns -->
<div class="row">
    <div class="span5">
        
        <h2>Top 5 Ranking</h2>
        <table class="table table-bordered table-striped table-condensed">
            <thead>
                <tr>
                    <th class="span2">Nome</th>
                    <th class="span2">Nick</th>
                    <th class="span1">Pontos</th>
                </tr>
            </thead>
            <tbody>
                @{
                    foreach (Ranking rank in Model.ranking)
                    {
                        <tr>
                            <td><a href="@Url.Content("/Jogadores/Detalhes/" + rank.IdUsuario)">@rank.NomeUsuario</a></td>
                            <td>@rank.ApelidoUsuario</td>
                            <td>@rank.Pontos</td>
                        </tr>
                    }
                }
            </tbody>
        </table>
        <p><a class="btn" href="@Url.Content("~/Jogadores")">Ver os detalhes &raquo;</a></p>
    </div>
    <div class="span7">
        <h2>Últimos Eventos</h2>
        <table class="table table-bordered table-striped table-condensed">
            <thead>
                <tr>
                    <th class="span2">Nome</th>
                    <th class="span3">Campeonatos</th>
                    <th class="span2">Data</th>
                </tr>
            </thead>
            <tbody>
                @{
                    foreach (Eventos evento in Model.eventos)
                    {
                        <tr>
                            <td><a href="@Url.Content("~/Eventos/Detalhes/" + evento.Id)">@evento.Nome</a></td>
                            <td>
                                @{
                                    int i = 0;
                                    List<CampeonatoPorEvento> campList = Model.campeonatos.Where(x => x.IdEvento == evento.Id).ToList();
                                    foreach (CampeonatoPorEvento camp in campList)
                                    {
                                        string appendConmma = i == campList.Count() - 1 ? "" : ", <br/>";
                                        i++;
                                        <a>@camp.NomeJogo</a>@Html.Raw(appendConmma)
                                    }
                                }
                            </td>
                            @{
                                string dataEvento;
                                if (evento.DataEventoInicio.CompareTo(evento.DataEventoFim) > 0)
                                {
                                    dataEvento = evento.DataEventoInicio.ToString("dd/MM/yyyy");
                                }
                                else
                                {
                                    dataEvento = evento.DataEventoInicio.ToString("dd/MM/yyyy") + " a " + evento.DataEventoFim.ToString("dd/MM/yyyy");
                                }
                            }
                            <td>@dataEvento</td>
                        </tr>
                    }
                }
            </tbody>
        </table>
        <p><a class="btn" href="@Url.Content("~/Eventos")">Ver os detalhes &raquo;</a></p>
    </div>
</div>
