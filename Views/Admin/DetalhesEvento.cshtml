@model CampeonatosNParty.Models.ViewModel.EventosDetailView
@{
    ViewBag.Title = "Detalhes do evento";
    CampeonatosNParty.Models.Database.Cidade cidade = CampeonatosNParty.Models.Database.Cidade.WithIdentity(Model.evento.IdCidade);
    CampeonatosNParty.Models.Database.Estado estado = CampeonatosNParty.Models.Database.Estado.WithIdentity(Model.evento.IdEstado);
    CampeonatosNParty.Models.Database.TipoEvento tipoEvento = CampeonatosNParty.Models.Database.TipoEvento.WithIdentity(Model.evento.TipoEvento);
}

@{
    if(Model != null)
    {   
        <ul class="breadcrumb">
            <li><a href="@Url.Content("/Admin/")">Admin</a> <span class="divider">/</span></li>
            <li><a href="@Url.Content("/Admin/Eventos/")">Eventos</a> <span class="divider">/</span></li>
            <li class="active">@Model.evento.Nome</li>
        </ul>
    
        if (ViewData["CurrentUser"] != null && ((CampeonatosNParty.Models.Database.Usuarios)ViewData["CurrentUser"]).Nivel_Permissao > 90)
        {
            <a class="btn btn-large pull-right" href="@Url.Content("/Admin/EditarEvento/" + Model.evento.Id)">Editar</a>
        }
        
        <div class="page-header">
          <h2>@Model.evento.Nome</h2>
          
        </div>
         <div class="row">
            <div class="span3">
                <img src="@Model.evento.ImagemURL" alt="@Model.evento.Nome" style="margin-bottom: 20px;"/>
            </div>
             <div class="span8 offset1">
                @{
                     if(cidade != null && !string.IsNullOrEmpty(cidade.Nome))
                    {
                        string cidadeSigla = estado != null && !string.IsNullOrEmpty(estado.Sigla) ? cidade.Nome + " - " + estado.Sigla : cidade.Nome;
                        <div class="row">
                            <b>Cidade</b>: @cidadeSigla
                        </div>
                    }

                    if (tipoEvento != null && !string.IsNullOrEmpty(tipoEvento.Nome))
                    {
                        <div class="row">
                            <b>Tipo</b>: @tipoEvento.Nome
                        </div>
                    }
                
                    if (!string.IsNullOrEmpty(Model.evento.Local))
                    {
                        <div class="row">
                            <b>Local</b>: @Model.evento.Local
                        </div>
                    }
        
                    if (Model.evento.DataEventoInicio != null)
                    {
                        string dataEvento = Model.evento.DataEventoInicio.CompareTo(Model.evento.DataEventoFim) > 0 ?
                            Model.evento.DataEventoInicio.ToString("dd/MM/yyyy") :
                            Model.evento.DataEventoInicio.ToString("dd/MM/yyyy") + " a " + Model.evento.DataEventoFim.ToString("dd/MM/yyyy");
                                        
                        <div class="row">
                            <b>Data</b>: @dataEvento
                        </div>
                    }
                }
            </div>
    </div>
    }
}

