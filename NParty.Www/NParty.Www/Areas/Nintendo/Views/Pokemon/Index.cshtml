@{
    ViewBag.Title = "Pokémon";
    ViewData["ActiveMenu"] = 1;

    List<NParty.Www.Models.Article> articles = (List<NParty.Www.Models.Article>)ViewData["articles"];
    int currentPage = (int)ViewData["currentPage"];

    int maxPosts = (int)ViewData["MaxPosts"];

    ViewData["title"] = "Pokémon";
    ViewData["metaDescription"] = "Tudo sobre Pokémon com a N-Party";
    ViewData["metaImage"] = Url.Content("~/Content/img/metaImages/pokemon.jpg");
    ViewData["metaUrl"] = Url.Content("~/Nintendo/Pokemon");
    ViewData["metaKeywords"] = new List<string>() { "Pokémon", "Pokemon", "Nintendo", "Pikachu" };

    string[] nintendoSpecialTags = (string[])ViewData["NintendoSpecialTags"];

    Layout = "~/Views/Shared/_Layout.cshtml";

    @section Head{
        <link rel="stylesheet" href="@Url.Content("~/Content/css/pokemon20th.css")"/>

        @if (articles.Count >= maxPosts)
        {
            <link rel="next" href="@Url.Content("~/Nintendo/Pokemon?page=" + (currentPage + 1))">
        }
        @if (currentPage > 0)
        {
            <link rel="prev" href="@Url.Content("~/Nintendo/Pokemon?page=" + (currentPage - 1))">
        }
    }

    string dailyMusicVideoId = (string)ViewData["DailyMusicVideoId"];
}

<div id="nintendo-container" class="pokemon20th" style="padding: 0;">
    @{Html.RenderPartial("SubMenus/Nintendo", 9);}
    <section class="content-section video-section">
        <div class="pattern-overlay">
            <video autoplay loop muted poster="@Url.Content("~/Content/img/poke20th_bgHome.jpg")">
                <source src="http://nintendoparty.com.br/videos/pokevideo.mp4" type="video/mp4">
            </video>
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="logo"><img class="img-responsive" alt="20 anos de Pokémon" src="@Url.Content("~/Content/img/20anospokemon.png")" /></div>
                        <h3>Comemore o aniversário de Pokémon com a N-Party!</h3>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <nav class="navbar navbar-default" id="pokemon20th-navbar">
        <div class="container">
            <ul class="nav nav-pills menu">
                <li role="presentation" class="active"><a href="#">Home</a></li>
                <li role="presentation"><a href="#">Timeline Interativa</a></li>
                <li role="presentation"><a href="#">Poké Party Day</a></li>
            </ul>
        </div>
    </nav>
    <div id="carousel-pokemon20th" class="carousel slide" data-ride="carousel">
        <!-- Indicators -->
        <ol class="carousel-indicators">
            <li data-target="#carousel-pokemon20th" data-slide-to="0" class="active"></li>
            <li data-target="#carousel-pokemon20th" data-slide-to="1"></li>
        </ol>

        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox" style="background: url('@Url.Content("~/Content/img/marquee_bg.jpg")') center center; background-size: cover;">
            <div class="item active">
                <a href="#">
                    <div class="item-inner" style="text-align: center;">
                        <img style="margin: auto;" class="img-responsive" src="@Url.Content("~/Content/img/poke20th_timeline.png")" alt="Timeline" />
                    </div>
                    <div class="carousel-caption">
                        <span class="title">Timeline Interativa</span>
                        <p>Acompanhe a trajetória da franquia Pokémon da melhor forma possível: jogando!</p>
                    </div>
                </a>
            </div>
            <div class="item">
                <a href="#">
                    <div class="item-inner" style="text-align: center;">
                        <img style="margin: auto;" class="img-responsive" src="@Url.Content("~/Content/img/pokeEventoBg.png")" alt="Timeline" />
                    </div>
                    <div class="carousel-caption">
                        <span class="title">Poké Party Day</span>
                        <p>Um evento comemorativo dos 20 anos de Pokémon, com freeplays, campeonatos, palestras, cosplays e muito mais!</p>
                    </div>
                </a>
            </div>
        </div>

        <!-- Controls -->
        <a class="left carousel-control" href="#carousel-pokemon20th" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#carousel-pokemon20th" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <div class="container" style="padding-top: 30px;">
        @{
            if (articles != null && articles.Count > 0)
            {
                <div class="row">
                    <div class="col-md-8 inside-section col-bordered-right" style="margin-bottom: 20px;">

                        @foreach (NParty.Www.Models.Article article in articles)
                        {
                            bool isSpecialTag = false;

                            foreach (string label in article.Labels)
                            {
                                if (nintendoSpecialTags.Contains(label))
                                {
                                    isSpecialTag = true;
                                    break;
                                }
                            }
                            if (isSpecialTag)
                            {
                                <a class="hilight-article-item" href="@Url.Content("~/" + article.NPartyArticleLink)">
                                    <figure style="background-image: url('@article.CoverImage')"></figure>
                                    <h3>@article.Title</h3>
                                    @if (!string.IsNullOrEmpty(article.AuthorName))
                                    {
                                        <div class="author">Por @article.AuthorName em @article.DatePublished.ToString("dd/MM/yyyy")</div>
                                    }
                                    <p class="snippet">@article.Summary</p>
                                </a>
                            }
                            else
                            {
                                <a class="hilight-article-item hilight-md-article-item" href="@Url.Content("~/" + article.NPartyArticleLink)">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <figure style="background-image: url('@article.CoverImage')"></figure>
                                        </div>
                                        <div class="col-md-6">
                                            <h3>@article.Title</h3>
                                            @if (!string.IsNullOrEmpty(article.AuthorName))
                                            {
                                                <div class="author">Por @article.AuthorName em @article.DatePublished.ToString("dd/MM/yyyy")</div>
                                            }
                                            <p class="snippet">@article.Summary</p>
                                        </div>
                                    </div>
                                </a>
                            }
                            <hr />
                        }

                        <div class="row">
                            <div class="col-md-5 prevPage">
                                @{
                if (articles.Count >= maxPosts)
                {
                    <a rel="next" class="directionLink" href="@Url.Content("~/Nintendo/Pokemon?page=" + (currentPage + 1))" style="text-align: left"><span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span> ARTIGOS MAIS <b>ANTIGOS</b> </a>
                }
                                }
                            </div>
                            <div class="col-md-2"></div>
                            <div class="col-md-5 nextPage">
                                @{
                if (currentPage > 0)
                {
                    <a rel="prev" class="directionLink" href="@Url.Content("~/Nintendo/Pokemon?page=" + (currentPage - 1))" style="text-align: right;"> ARTIGOS MAIS <b>RECENTES</b> <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span></a>
                }
                                }
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        @if (!string.IsNullOrEmpty(dailyMusicVideoId))
                        {
                            <div id="sidebar-general-pokemon" class="sidebar">
                                <div class="sidebar-item">
                                    <h4 class="sidebar-title">Música do dia</h4>
                                    <div class="embed-responsive embed-responsive-16by9">
                                        <iframe width="560" height="315" src="https://www.youtube.com/embed/@dailyMusicVideoId" frameborder="0" allowfullscreen></iframe>
                                    </div>
                                </div>
                            </div>
                        }

                        @{Html.RenderPartial("Sidebars/Nintendo");}
                    </div>
                </div>
            }
            else
            {
                <div style="padding: 50px; text-align: center;"> Não foi possível encontrar publicãções no momento. Por favor, tente novamente mais tarde.</div>
            }
        }
    </div>
</div>

