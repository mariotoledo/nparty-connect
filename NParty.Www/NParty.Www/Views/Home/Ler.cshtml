@{
    ViewBag.Title = "Ler";

    ViewData["MenuHasBorderBottom"] = true;

    NParty.Www.Models.Article article = (NParty.Www.Models.Article)ViewData["article"];
}

<div class="container default-container" style="padding-top: 30px;">
    @if (article != null)
    {
        <div class="row">
            <div class="col-lg-8 col-bordered-right">
                <div class="post hentry" itemprop="blogPost" itemscope="itemscope" itemtype="http://schema.org/BlogPosting">
                    <div class="article">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="header">
                                    <img src="@article.CoverImage" style="width: 100%;">
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: -50px;  background-color: #FFF; padding: 30px; padding-bottom: 0px;">
                            <div class="row">
                                <div class="col-lg-12" style="margin-top: -50px; padding: 10px; padding-bottom: 0px; background-color: #FFF;">
                                    <div class="article-title">
                                        <h3 class="post-title entry-title" itemprop="name">
                                            @article.Title
                                        </h3>
                                        <!--<div class="subtitulo" itemprop="description">
                                            Apesar dos números não serem tão surpreendentes assim
                                        </div>-->
                                        @if (article.Author != null && !string.IsNullOrEmpty(article.Author.Name))
                                        {
                                            <div class="author">
                                                <div>
                                                    Por
                                                    <span itemprop="name">@article.Author.Name</span>
                                                    em
                                                    @article.DatePublished.Day de @article.DatePublished.ToString("MMMM") de @article.DatePublished.Year
                                                </div>
                                            </div>
                                        }
                                        <div class="share-icons">
                                            <a title="Compartilhe no Facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://www.nparty.com.br/@(Url.Content("~/" + article.NPartyArticleLink))" class="share-icon" style="background-image: url('@Url.Content("~/Content/img/icons/article-share/facebook_32.png")')" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"></a>
                                            <a title="Compartilhe no Twitter" href="https://twitter.com/intent/tweet?source=n_party&related=n_party&via=n_party&url=http://www.nparty.com.br/@(Url.Content("~/" + article.NPartyArticleLink))" class="share-icon" style="background-image: url('@Url.Content("~/Content/img/icons/article-share/twitter_32.png")')" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"></a>
                                            <a title="Compartilhe no LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&url=http://www.nparty.com.br/@(Url.Content("~/" + article.NPartyArticleLink))" class="share-icon" style="background-image: url('@Url.Content("~/Content/img/icons/article-share/linkedin_32.png")')" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"></a>
                                            <a title="Compartilhe no Google+" href="https://plus.google.com/share?url=http://www.nparty.com.br/@(Url.Content("~/" + article.NPartyArticleLink))" class="share-icon" style="background-image: url('@Url.Content("~/Content/img/icons/article-share/googleplus_32.png")')" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"></a>
                                        </div>
                                    </div>
                                    <div id="loading-content">
                                        Carregando...
                                    </div>
                                    <div class="content" id="article-content">
                                        @Html.Raw(article.Content)
                                    </div>
                                    @{
                                        if (article.Author != null && !string.IsNullOrEmpty(article.Author.Name))
                                        {
                                            <div class="author-box" id="authorBox">
                                                <div class="row">
                                                    <div class="col-sm-2">
                                                        <img class="authorPhoto img-rounded img-responsive" id="authorPhoto" src="@article.Author.ImageUrl">
                                                    </div>
                                                    <div class="col-sm-10" id="authorDescription"><b>@article.Author.Name</b> @article.Author.Description</div>
                                                </div>
                                            </div>
                                        }
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="related-posts-wrapper">
                        <h3>Leia também</h3>
                        <div class="row" id="related-posts">
                            <div class="col-md-12">
                                Carregado...
                            </div>
                        </div>
                    </div>
                    @{Html.RenderPartial("Comments/Disqus");}
                </div>
            </div>
            <div class="col-lg-4">
                @{Html.RenderPartial("Sidebars/General");}
            </div>
        </div>
    }
    else
    {
        <div style="padding: 50px; text-align: center;">Não foi possível encontrar a publicação desejada.</div>
    }
</div>
@section Scripts{
    <script type="text/javascript">
        var labels = [];

        $(document).ready(function () {
            adjustArticleImages();
            adjustTables();
            adjustArticleIframes();
            adjustArticleSubtitles();

            $('#loading-content').hide();
            $('#article-content').show();
        });

        var $hilights = $('#general-hilights');

        $.ajax('@Url.Content("~/Home/GetHilightItems/")').done(function (data) {
            if (!data || data.length == 0) {
                $hilights.html('<li>Não foi possível carregar os destaques. Tente novamente mais tarde.</li>');
                return;
            }

            var appendable = '';

            $.each(data, function (index) {
                appendable += '<li class="media ' + data[index].Domain.toLowerCase() + '">' +
                               '<a href="#"><div class="media-left"><div style="width: 45px; height: 45px; background-image: url(' + data[index].CoverImage + '); background-size: cover; background-position: center center;" class="media-object"></div></div>' +
                               '<div class="media-body"><span class="label label-default">' + data[index].Domain + '</span>' + data[index].Title + '</div></a></li>'
            });

            $hilights.html(appendable);
        }).fail(function () {
            $hilights.html('<li>Não foi possível carregar os destaques. Tente novamente mais tarde.</li>');
        });
    </script>
    @{
        if (article != null && article.Labels != null)
        {
            foreach (string label in article.Labels)
            {
                <script>
                    labels.push('@label');
                </script>
            }
        }
    }
    @if (article != null)
    {
        <script type="text/javascript">
            printRelatedPostsByLabels('@article.Id', labels, 'related-posts');
        </script>
    }
}