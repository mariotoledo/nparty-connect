@model CampeonatosNParty.Models.Database.Eventos
@{
    ViewBag.Title = "Novo";
    IEnumerable<CampeonatosNParty.Models.Database.TipoEvento> tipoEvento =
        (IEnumerable<CampeonatosNParty.Models.Database.TipoEvento>)ViewData["TipoEvento"];
    IEnumerable<CampeonatosNParty.Models.Database.Estado> estados =
        (IEnumerable<CampeonatosNParty.Models.Database.Estado>)ViewData["Estados"];
}


<div class="page-header">
    <h1>Novo Evento <small>Complete as informações abaixo, e clique em "Salvar"</small></h1>
</div>

<ol class="breadcrumb">
    <li><a href="@Url.Content("~/Dashboard/")">Home</a></li>
    <li><a href="@Url.Content("~/Eventos/Gerenciar")">Gerenciar Eventos</a></li>
    <li class="active">Novo Evento</li>
</ol>

<form class="form form-horizontal">
    <div class="form-group">
        <label for="Nome" class="col-sm-2 control-label">Nome</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="Nome" name="Nome" placeholder="Insira o nome do evento">
        </div>
    </div>
    <div class="form-group">
        <label for="Nome" class="col-sm-2 control-label">Tipo do evento</label>
        <div class="col-sm-6">
            <select name="TipoEvento" id="TipoEvento" class="form-control">
                <option value="0">Selecione</option>
                @foreach(CampeonatosNParty.Models.Database.TipoEvento tipo in tipoEvento)
                {
                    <option value="@tipo.Id">@tipo.Nome</option>    
                }                
            </select>
        </div>
    </div>
    <div class="form-group">
        <label for="Local" class="col-sm-2 control-label">Local</label>
        <div class="col-sm-6">
            <input type="text" class="form-control" id="Local" name="Local" placeholder="Insira o local que o evento será realizado"><br/>
            <p style="font-size: 10px;">Ex: Faculdade Anhaguera, Bob's da Avenida Paulsita, Campo de Marte, etc.</p>
        </div>
    </div>
    <div class="form-group">
        <label for="Estado" class="col-sm-2 control-label">Estado</label>
        <div class="col-sm-6">
            <select name="Estado" id="Estado" onchange="onEstadoSelected(this.value)" class="form-control">
                <option value="0">Selecione</option>
                @foreach (CampeonatosNParty.Models.Database.Estado estado in estados)
                {
                    <option value="@estado.EstadoId">@estado.Sigla</option>
                }
            </select>
        </div>
    </div>
    <div class="form-group">
        <label for="Cidade" class="col-sm-2 control-label">Cidade</label>
        <div class="col-sm-6">
            <select name="Cidade" id="Cidade" class="form-control" disabled></select>
        </div>
    </div>
    <div class="form-group">
        <label for="DataEventoInicio" class="col-sm-2 control-label">Data e hora de início do evento</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="DataEventoInicio" name="DataEventoInicio" placeholder="Insira a data de início do evento">
        </div>
    </div>
    <div class="form-group">
        <label for="DataEventoFim" class="col-sm-2 control-label">Data de término do evento</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="DataEventoFim" name="DataEventoFim" placeholder="Insira a data de início do evento">
        </div>
    </div>
    <div class="form-group">
        <label for="ImagemURL" class="col-sm-2 control-label">Imagem URL</label>
        <div class="col-sm-10">
            <input type="file" class="form-control" id="ImagemURL" name="ImagemURL">
        </div>
    </div>
    <div class="form-group">
        <label for="CoverURL" class="col-sm-2 control-label">Cover URL</label>
        <div class="col-sm-10">
            <input type="file" class="form-control" id="CoverURL" name="CoverURL">
        </div>
    </div>
</form>
@section Scripts{
    <script>
        function onEstadoSelected(idEstado) {
            $('#Cidade').html('<option value="0">Carregando</option>');
            $('#Cidade').attr('disabled', true);
        $.ajax({
            url: '@Url.Content("~/Eventos/GetCidades?idEstado=")' + idEstado,
            success: function (data) {
                $('#Cidade').html('');
                if (data) {
                    $.each(data, function (index) {
                        $('#Cidade').append("<option value='" + data[index].CidadeId + "'>" + data[index].Nome + "</option>");
                    });
                }
                $('#Cidade').removeAttr('disabled');
            }
        });
    }
    </script>    
}
